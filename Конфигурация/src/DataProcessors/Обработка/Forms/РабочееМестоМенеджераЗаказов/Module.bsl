

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
    
    // Устанавливаем дату отгрузки на завтра
    ДатаОтгрузки = ТекущаяДата() + 86400;
    
    
    // Инициализируем таблицы
    // Создаём реквизит "СписокМаршрутов" как таблицу значений
    РеквизитТаблицаМаршрутов = Новый РеквизитФормы("СписокМаршрутов", Новый ОписаниеТипов("ТаблицаЗначений"), , "Маршруты");
    
    // Создаём реквизиты для таблицы маршрутов
    РеквизитМаршрутСсылка = Новый РеквизитФормы("МаршрутСсылка", Новый ОписаниеТипов("СправочникСсылка.Маршруты"), "СписокМаршрутов", "Маршрут");
    РеквизитНаименованиеМаршрута = Новый РеквизитФормы("НаименованиеМаршрута", Новый ОписаниеТипов("Строка"), "СписокМаршрутов", "Наименование");

    // Создаём реквизит "СписокТорговыхТочек" как таблицу значений
    РеквизитТаблицаТочек = Новый РеквизитФормы("СписокТорговыхТочек", Новый ОписаниеТипов("ТаблицаЗначений"), , "Торговые точки");
//    
//    
//    // Создаём реквизиты для таблицы торговых точек
//    РеквизитВыбранаТочка = Новый РеквизитФормы("ВыбранаТочка", Новый ОписаниеТипов("Булево"), "СписокТорговыхТочек", "Выбрана");
//    РеквизитТочкаСсылка = Новый РеквизитФормы("ТочкаСсылка", Новый ОписаниеТипов("СправочникСсылка.Клиенты"), "СписокТорговыхТочек", "Торговая точка");
//    РеквизитНаименованиеТочки = Новый РеквизитФормы("НаименованиеТочки", Новый ОписаниеТипов("Строка"), "СписокТорговыхТочек", "Наименование");
//    РеквизитАдресТочки = Новый РеквизитФормы("АдресТочки", Новый ОписаниеТипов("Строка"), "СписокТорговыхТочек", "Адрес");
//
//    // Создаём реквизит "СписокЗаказов" как таблицу значений
//    РеквизитТаблицаЗаказов = Новый РеквизитФормы("СписокЗаказов", Новый ОписаниеТипов("ТаблицаЗначений"), , "Заказы");
//    
//    // Создаём реквизиты для таблицы заказов
//    РеквизитПродукцияСсылка = Новый РеквизитФормы("ПродукцияСсылка", Новый ОписаниеТипов("СправочникСсылка.Продукция"), "СписокЗаказов", "Продукция");
//    РеквизитНаименованиеПродукции = Новый РеквизитФормы("НаименованиеПродукции", Новый ОписаниеТипов("Строка"), "СписокЗаказов", "Наименование");
//    РеквизитКоличествоПродукции = Новый РеквизитФормы("КоличествоПродукции", Новый ОписаниеТипов("Число", , , 3), "СписокЗаказов", "Количество");
//    РеквизитЦенаПродукции = Новый РеквизитФормы("ЦенаПродукции", Новый ОписаниеТипов("Число", , , 2), "СписокЗаказов", "Цена");
//    РеквизитСуммаПродукции = Новый РеквизитФормы("СуммаПродукции", Новый ОписаниеТипов("Число", , , 2), "СписокЗаказов", "Сумма");
//
//    // Создаём реквизит для даты отгрузки
//    РеквизитДатаОтгрузки = Новый РеквизитФормы("ДатаОтгрузки", Новый ОписаниеТипов("Дата"), , "Дата отгрузки");

    // Объединяем все созданные реквизиты в массив
    МассивРеквизитов = Новый Массив;
    МассивРеквизитов.Добавить(РеквизитТаблицаМаршрутов);
    МассивРеквизитов.Добавить(РеквизитМаршрутСсылка);
    МассивРеквизитов.Добавить(РеквизитНаименованиеМаршрута);
    МассивРеквизитов.Добавить(РеквизитТаблицаТочек);
//    МассивРеквизитов.Добавить(РеквизитВыбранаТочка);
//    МассивРеквизитов.Добавить(РеквизитТочкаСсылка);
//    МассивРеквизитов.Добавить(РеквизитНаименованиеТочки);
//    МассивРеквизитов.Добавить(РеквизитАдресТочки);
//    МассивРеквизитов.Добавить(РеквизитТаблицаЗаказов);
//    МассивРеквизитов.Добавить(РеквизитПродукцияСсылка);
//    МассивРеквизитов.Добавить(РеквизитНаименованиеПродукции);
//    МассивРеквизитов.Добавить(РеквизитКоличествоПродукции);
//    МассивРеквизитов.Добавить(РеквизитЦенаПродукции);
//    МассивРеквизитов.Добавить(РеквизитСуммаПродукции);
//    МассивРеквизитов.Добавить(РеквизитДатаОтгрузки);

    // Передаём массив реквизитов в метод для обновления состава реквизитов формы
    ИзменитьРеквизиты(МассивРеквизитов);
    
        // СОЗДАЕМ ЭЛЕМЕНТЫ ФОРМЫ ДЛЯ ОТОБРАЖЕНИЯ

    // Создаем основную группу с горизонтальным расположением
    ГруппаОсновная = Элементы.Добавить("ГруппаОсновная", Тип("ГруппаФормы"));
    ГруппаОсновная.Ширина = 100;

    // === ЛЕВАЯ ГРУППА (Маршруты) ===
    ГруппаЛевая = Элементы.Добавить("ГруппаЛевая", Тип("ГруппаФормы"), ГруппаОсновная);
    ГруппаЛевая.Ширина = 30;
    ГруппаЛевая.Заголовок = "Маршруты";

    // Надпись
//    НадписьМаршруты = Элементы.Добавить("НадписьМаршруты", Тип("Надпись"), ГруппаЛевая);
//    НадписьМаршруты.Вид = ВидПоляФормы.Надпись;
//    НадписьМаршруты.Заголовок = "Выбранные маршруты:";

    // Кнопка добавления маршрута
    КнопкаДобавитьМаршрут = Элементы.Добавить("КнопкаДобавитьМаршрут", Тип("КнопкаФормы"), ГруппаЛевая);
    КнопкаДобавитьМаршрут.Заголовок = "Добавить маршрут";
//    
//        // Таблица маршрутов
//    ТаблицаМаршруты = Элементы.Добавить("ТаблицаМаршруты", Тип("ТаблицаФормы"), ГруппаЛевая);
//    ТаблицаМаршруты.ПутьКДанным = "СписокМаршрутов";
//    ТаблицаМаршруты.Высота = 15;
//
//    // Колонка "Наименование" в таблице маршрутов
//    КолонкаНаименованиеМаршрута = Элементы.Добавить("КолонкаНаименованиеМаршрута", Тип("ПолеФормы"), ТаблицаМаршруты);
//    КолонкаНаименованиеМаршрута.Вид = ВидПоляФормы.ПолеВвода;
//    КолонкаНаименованиеМаршрута.ПутьКДанным = "СписокМаршрутов.Наименование";
//    КолонкаНаименованиеМаршрута.Заголовок = "Маршрут";
    
КонецПроцедуры